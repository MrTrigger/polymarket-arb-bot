# Data Collection Configuration
# ==============================
#
# Collects data from Binance (spot prices) and Polymarket (orderbooks).
# Supports both historical and live collection modes.
#
# Environment variables:
#   CLICKHOUSE_URL      - ClickHouse HTTP URL
#   CLICKHOUSE_USER     - Username (optional)
#   CLICKHOUSE_PASSWORD - Password (optional)
#
# Usage:
#   # Historical mode (fetch past data)
#   cargo run -p poly-collect --release
#
#   # Live mode (stream real-time data)
#   # Set mode = "live" in [collection] below

# ============================================================================
# USER SETTINGS (configure these)
# ============================================================================

[general]
assets = ["BTC", "ETH", "SOL"]    # Assets to collect
timeframes = ["15m"]              # Timeframes: "5m", "15m", "1h"
log_level = "info"                # info, debug, trace

[collection]
mode = "history"                  # "history" or "live"
# Use start_date/end_date OR days (not both)
#start_date = "2025-01-01"        # Start date (YYYY-MM-DD)
#end_date = "2025-01-15"          # End date (YYYY-MM-DD)
days = 7                          # Alternative: collect last N days

[output]
mode = "csv"                      # clickhouse, csv, or both
csv_dir = "data"                  # Directory for CSV output

# ============================================================================
# DEFAULTS (rarely need to change)
# ============================================================================

[live]
discovery_interval_secs = 300     # How often to check for new markets

[binance]
buffer_size = 500
flush_interval_ms = 5000
connect_timeout_secs = 10
initial_reconnect_delay_secs = 1
max_reconnect_delay_secs = 60

[clob]
snapshot_buffer_size = 500
delta_buffer_size = 1000
flush_interval_ms = 5000
snapshot_interval_ms = 100
connect_timeout_secs = 10
initial_reconnect_delay_secs = 1
max_reconnect_delay_secs = 60

[clickhouse]
max_rows = 10000
max_bytes = 10485760
period_secs = 5

[health]
log_interval_secs = 30
